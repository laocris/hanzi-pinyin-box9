<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ordena los Caracteres y Pinyin</title>
  <style>
    :root{
      --bg:#0f172a;
      --card:#111827;
      --muted:#e5e7eb;
      --accent:#22d3ee;
      --ok:#16a34a33;
      --bad:#dc262633;
      --ring:#22d3ee55;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:#e5e7eb;
      background: radial-gradient(1200px 600px at 70% -10%, #0b2a35 0%, var(--bg) 50%) no-repeat, var(--bg);
      min-height:100dvh;
      display:flex;
      flex-direction:column;
      gap:16px;
      padding:16px;
    }
    h1{font-size:clamp(1.2rem, 2.5vw, 1.8rem); margin:4px 0 0}
    .instructions{opacity:.85; margin:0 0 8px}
    .game-container{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
      width:100%;
      max-width:1100px;
    }
    @media (min-width:900px){
      .game-container{grid-template-columns:1fr 1fr;}
    }
    .box{
      background:linear-gradient(180deg, #0b1220 0%, #0b1222 100%);
      border:1px solid #1f2937;
      border-radius:14px;
      padding:12px;
      min-height:260px;
      display:flex;
      flex-direction:column;
      gap:8px;
      box-shadow: 0 10px 30px #00000055 inset, 0 0 0 1px #00000055;
    }
    .box h2{margin:0 0 6px; font-size:1rem; color:#c7d2fe}
    .draggable-items, .droppable-areas{
      display:grid;
      gap:8px;
      grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
      align-content:start;
    }
    .draggable-item, .droppable-area{
      border:1px solid #243041;
      background:linear-gradient(180deg, #0e1624 0%, #0d1522 100%);
      color:#e5e7eb;
      padding:10px;
      border-radius:10px;
      text-align:center;
      min-height:48px;
      display:flex;
      align-items:center;
      justify-content:center;
      user-select:none;
      transition:transform .12s ease, box-shadow .12s ease, border-color .12s;
    }
    .draggable-item{
      cursor:grab;
      font-size:1.05rem;
    }
    .draggable-item:active{cursor:grabbing; transform:scale(0.98)}
    .droppable-area{
      background:linear-gradient(180deg, #0b1120 0%, #0a1020 100%);
      font-variant-ligatures:none;
    }
    .droppable-area.empty::after{
      color:#9ca3af;
      font-size:.8rem;
      position:absolute;
      transform:translateY(28px);
      pointer-events:none;
    }
    .droppable-area{
      position:relative;
      min-height:54px;
    }
    .droppable-area.highlight{
      outline:2px dashed var(--accent);
      outline-offset:2px;
      box-shadow:0 0 0 4px var(--ring);
    }
    .droppable-area.correct{background:var(--ok); border-color:#16a34a77}
    .droppable-area.incorrect{background:var(--bad); border-color:#dc262677}
    .pill{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background:#0b2530;
      border:1px solid #113745;
      font-size:.85rem;
      color:#a5f3fc;
    }
    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    button{
      background:linear-gradient(180deg, #0ea5e9 0%, #0284c7 100%);
      border:0;
      color:white;
      padding:10px 14px;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;
      transition:transform .08s ease, filter .08s ease;
    }
    button:active{transform:translateY(1px)}
    #resetBtn{
      background:linear-gradient(180deg, #64748b 0%, #475569 100%);
    }
    .legend{opacity:.85; font-size:.9rem}
  </style>
</head>
<body>
  <h1>Ordena los Caracteres y Pinyin</h1>
  <p class="instructions">Arrastra cada carácter al pinyin correcto. 加油！</p>

  <div class="game-container">
    <div class="box">
      <h2>Caracteres <span class="pill">Drag</span></h2>
      <div id="characters" class="draggable-items" aria-label="Caracteres para arrastrar"></div>
    </div>

    <div class="box">
      <h2>Pinyin <span class="pill">Drop</span></h2>
      <div id="pinyin" class="droppable-areas" aria-label="Zonas para soltar"></div>
    </div>
  </div>

  <div class="controls">
    <button id="checkBtn">Verificar respuestas</button>
    <button id="resetBtn">Reiniciar juego</button>
  </div>
  <div class="legend">Consejo: también puedes hacer clic sobre un carácter y luego sobre un cuadro de pinyin para soltarlo.</div>

  <script>
const characters = [
  { char: '我',   pinyin: 'wǒ' },
  { char: '你',   pinyin: 'nǐ' },
  { char: '他',   pinyin: 'tā (masculino)' },
  { char: '她',   pinyin: 'tā (femenino)' },
  { char: '很',   pinyin: 'hěn' },
  { char: '学习', pinyin: 'xuéxí' },
  { char: '汉语', pinyin: 'hànyǔ' },
  { char: '是',   pinyin: 'shì' },
  { char: '什么', pinyin: 'shénme' },
  { char: '叫',   pinyin: 'jiào' },
  { char: '名字', pinyin: 'míngzi' },
  { char: '高兴', pinyin: 'gāoxìng' },
  { char: '认识', pinyin: 'rènshi' },
  { char: '们',   pinyin: 'men' },
  { char: '猫',   pinyin: 'māo' },
  { char: '都',   pinyin: 'dōu' },
  { char: '狗',   pinyin: 'gǒu' }
];

    // Util
    const shuffleArray = (array) => {
      const a = [...array];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    };

    const charactersContainer = document.getElementById('characters');
    const pinyinContainer = document.getElementById('pinyin');
    const checkBtn = document.getElementById('checkBtn');
    const resetBtn = document.getElementById('resetBtn');

    // Estado para soporte de click-to-drop
    let pickedEl = null;

    function createCharacterElements() {
      const shuffledCharacters = shuffleArray(characters);
      charactersContainer.innerHTML = '';
      shuffledCharacters.forEach((item, idx) => {
        const el = document.createElement('div');
        el.className = 'draggable-item';
        el.draggable = true;
        el.textContent = item.char;
        el.dataset.match = item.pinyin;
        el.dataset.id = 'char-' + idx;
        charactersContainer.appendChild(el);
      });
    }

    function createDroppableAreas() {
      const shuffled = shuffleArray(characters);
      pinyinContainer.innerHTML = '';
      shuffled.forEach((item) => {
        const area = document.createElement('div');
        area.className = 'droppable-area empty';
        area.dataset.match = item.pinyin;
        area.textContent = item.pinyin;
        pinyinContainer.appendChild(area);
      });
    }

    function resetHighlights() {
      document.querySelectorAll('.droppable-area').forEach(a => a.classList.remove('highlight'));
    }

    function resetFeedback() {
      document.querySelectorAll('.droppable-area').forEach(a => a.classList.remove('correct','incorrect'));
    }

    function resetGame() {
      pickedEl = null;
      createCharacterElements();
      createDroppableAreas();
    }

    function checkAnswers() {
      resetFeedback();
      document.querySelectorAll('.droppable-area').forEach(area => {
        const child = area.querySelector('.draggable-item');
        if (child) {
          const ok = child.dataset.match === area.dataset.match;
          area.classList.add(ok ? 'correct' : 'incorrect');
        }
      });
    }

    // Delegación de eventos para draggables (funciona aunque se regenere el DOM)
    document.addEventListener('dragstart', (e) => {
      const item = e.target.closest('.draggable-item');
      if (!item) return;
      e.dataTransfer.setData('text/plain', item.dataset.id || '');
      e.dataTransfer.effectAllowed = 'move';
      item.classList.add('dragging');
      pickedEl = item; // también para clic-drop
    });

    document.addEventListener('dragend', (e) => {
      const item = e.target.closest('.draggable-item');
      if (item) item.classList.remove('dragging');
      resetHighlights();
    });

    // Delegación para droppables
    document.addEventListener('dragover', (e) => {
      const area = e.target.closest('.droppable-area');
      if (!area) return;
      e.preventDefault(); // necesario para permitir drop
      area.classList.add('highlight');
      e.dataTransfer.dropEffect = 'move';
    });

    document.addEventListener('dragleave', (e) => {
      const area = e.target.closest('.droppable-area');
      if (!area) return;
      area.classList.remove('highlight');
    });

    document.addEventListener('drop', (e) => {
      const area = e.target.closest('.droppable-area');
      if (!area) return;
      e.preventDefault();
      area.classList.remove('highlight');

      // Solo un item por área: si ya hay uno, lo devolvemos a la columna de caracteres
      const existing = area.querySelector('.draggable-item');
      if (existing && pickedEl && existing !== pickedEl) {
        charactersContainer.appendChild(existing);
      }

      // Mover el elemento arrastrado
      const dragging = document.querySelector('.draggable-item.dragging') || pickedEl;
      if (dragging) {
        area.appendChild(dragging);
        area.classList.remove('empty');
      }
    });

    // Soporte click-to-drop (útil en móviles)
    document.addEventListener('click', (e) => {
      const item = e.target.closest('.draggable-item');
      const area = e.target.closest('.droppable-area');

      if (item) {
        pickedEl?.classList.remove('selected');
        pickedEl = item;
        item.classList.add('selected');
        return;
      }
      if (area && pickedEl) {
        const existing = area.querySelector('.draggable-item');
        if (existing && existing !== pickedEl) {
          charactersContainer.appendChild(existing);
        }
        area.appendChild(pickedEl);
        area.classList.remove('empty');
        pickedEl.classList.remove('selected');
        pickedEl = null;
      }
    });

    checkBtn.addEventListener('click', checkAnswers);
    resetBtn.addEventListener('click', () => {
      resetFeedback();
      resetGame();
    });

    // Inicializar
    resetGame();
  </script>
</body>
</html>